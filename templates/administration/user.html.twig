{% extends 'administration/index.html.twig' %}

{% block stylesheets %}
  {{ parent() }}
  <link rel="stylesheet" href="/css/admin_user.css" />
{% endblock %}

{% block container %}
  <div class="my-3 p-3 bg-white rounded box-shadow text-left">
    <div class="table-wrapper">
      <div class="table-title">
        <div class="row">
          <div class="col-sm-5">
            <h2>
              Utilisateurs
            </h2>
          </div>
        </div>
      </div>
      <table class="table table-striped table-hover">
        <thead>
          <tr>
            <th>
              Utilisateur
            </th>
            <th>
              Adresse mail
            </th>
            <th>
              Rôle
            </th>
            <th>
              Dernière connexion
            </th>
            <th>
              Actions
            </th>
          </tr>
        </thead>
        <tbody>
          {% for user in users %}
            <tr>
              <td>
                <a href="#">
                  <img src="{{
                    user.avatar == 'default.png'
                      ? asset('images/logos/' ~ user.avatar)
                      : asset('uploads/avatar/' ~ user.avatar)
                    }}"
                    class="avatar"
                    alt="Avatar" />
                  {{ user.username }}
                </a>
              </td>
              <td>
                {{ user.email }}
              </td>
              <td>
                {% for role in user.roles %}
                  {{ role }}
                {% endfor %}
              </td>
              <td>
                {{ user.lastLogin
                  ? user.lastLogin|format_datetime('medium', locale = 'fr')
                  : '-' }}
              </td>
              <td>
                <a href="#"
                  class="settings"
                  title="Paramètres"
                  data-toggle="tooltip">
                  <i class="fas fa-cog"></i>
                </a>
                <a href="#"
                  class="delete"
                  title="Supprimer"
                  data-toggle="tooltip">
                  <i class="fas fa-times-circle"></i>
                </a>
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>

      <div class="pagination justify-content-center">
        {{ knp_pagination_render(users) }}
      </div>
    </div>
  </div>
{% endblock %}
